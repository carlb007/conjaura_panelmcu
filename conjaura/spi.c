/*
 * spi.c
 *
 *  Created on: 2 Aug 2019
 *      Author: me
 */

#include "spi.h"

void ConfigLEDDataSPI(){
	SPI1->CR1 &= ~64;					//SET 6th BIT TO 0 TO DISABLE SPI
	SPI1->CR1 &= ~32768;				//SET 15th BIT TO 0 TO SET TO ZERO FOR UNIDIRECTIONAL MODE (MOSI MISO)
	SPI1->CR1 &= ~56; 					//CLEAR 3rd > 5th BITS TO WIPE SPEED SETTING
	SPI1->CR1 &= ~2;					//SET 2nd BIT TO 0 TO ENABLE CPOL LOW
	SPI1->CR1 |= 8;						//SET 4th BIT TO 1 TO SET SPEED TO CLK/4
	SPI1->CR1 |= 128;					//SET 7th BIT TO 1 TO ENABLE LSB MODE
	SPI1->CR1 |= 16384; 				//SET 14th BIT TO 1 TO ENABLE TX MODE


	SPI1->CR2 &= ~3840; 				//SET 8th > 11th BITS TO 0 - CLEAR THE DATA SIZE BITS
	SPI1->CR2 |= 1732; 					//SET 8th > 11th BITS TO 0111 TO ENABLE 8 BIT TRANSFER MODE
	SPI1->CR1 |= 64;					//SET 6th BIT TO 1 TO ENABLE SPI
	SPI1->CR2 |= 2;						//SET BIT 1 TO 1. ENABLE DMA TX (BIT 0 ENABLES RX DMA)
}
